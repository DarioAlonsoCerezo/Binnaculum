<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Core.Platform.MauiTester.MainPage"
             Title="Core Platform Tester">

    <ScrollView>
        <VerticalStackLayout
            Padding="20"
            Spacing="20">
            
            <!-- Header -->
            <Label
                Text="Core Platform Tester"
                FontSize="24"
                FontAttributes="Bold"
                HorizontalTextAlignment="Center"
                SemanticProperties.HeadingLevel="Level1" />

            <Label
                Text="Validates Core library functionality in real MAUI environment"
                FontSize="14"
                HorizontalTextAlignment="Center"
                TextColor="Gray" />

            <!-- Main Test Button -->
            <Button
                x:Name="RunTestButton"
                Text="Run Overview Test"
                FontSize="16"
                BackgroundColor="DodgerBlue"
                TextColor="White"
                HeightRequest="50"
                Clicked="OnRunTestClicked"
                IsEnabled="{Binding CanRunTest}"
                SemanticProperties.Hint="Runs Core Platform validation tests"
                HorizontalOptions="Fill" />

            <!-- Status Display -->
            <Frame 
                BackgroundColor="LightGray"
                Padding="15"
                CornerRadius="5"
                HasShadow="False">
                <VerticalStackLayout Spacing="10">
                    <Label
                        Text="Status:"
                        FontAttributes="Bold" />
                    <Label
                        x:Name="StatusLabel"
                        Text="{Binding OverallStatus}"
                        FontSize="14" />
                    <Label
                        x:Name="OverallResultLabel"
                        Text="{Binding OverallStatusIcon}"
                        FontSize="16"
                        FontAttributes="Bold"
                        HorizontalTextAlignment="Center" />
                </VerticalStackLayout>
            </Frame>

            <!-- Test Results Section -->
            <Frame 
                BackgroundColor="White"
                Padding="15"
                CornerRadius="5"
                HasShadow="True"
                IsVisible="{Binding IsCompleted}">
                <VerticalStackLayout Spacing="10">
                    <Label
                        Text="Test Results"
                        FontSize="18"
                        FontAttributes="Bold"
                        HorizontalTextAlignment="Center" />
                    
                    <!-- Results List -->
                    <CollectionView
                        x:Name="ResultsCollectionView"
                        ItemsSource="{Binding Steps}"
                        HeightRequest="300">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid 
                                    Padding="10,5"
                                    ColumnDefinitions="30,*,Auto">
                                    <Label
                                        Grid.Column="0"
                                        Text="{Binding StatusIcon}"
                                        FontSize="16"
                                        VerticalTextAlignment="Center" />
                                    <Label
                                        Grid.Column="1"
                                        Text="{Binding StepName}"
                                        FontSize="14"
                                        VerticalTextAlignment="Center" />
                                    <Label
                                        Grid.Column="2"
                                        Text="{Binding Details}"
                                        FontSize="12"
                                        TextColor="Gray"
                                        VerticalTextAlignment="Center" />
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- Action Buttons -->
            <StackLayout 
                Orientation="Horizontal"
                HorizontalOptions="Center"
                Spacing="10"
                IsVisible="{Binding IsCompleted}">
                <Button
                    x:Name="ViewDetailsButton"
                    Text="View Details"
                    BackgroundColor="Gray"
                    TextColor="White"
                    Clicked="OnViewDetailsClicked"
                    WidthRequest="120" />
                <Button
                    x:Name="ClearResultsButton"
                    Text="Clear Results"
                    BackgroundColor="OrangeRed"
                    TextColor="White"
                    Clicked="OnClearResultsClicked"
                    WidthRequest="120" />
            </StackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
